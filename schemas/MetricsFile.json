{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "./MetricsFile.json",
  "type": "object",
  "properties": {
    "schema": {
      "type": "string",
      "const": "METRICS_V1"
    },
    "data": {
      "type": "object",
      "properties": {
        "metrics": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "const": "CES"
                  },
                  "importKey": {
                    "description": "Unique identifier for metric",
                    "type": "string"
                  },
                  "title": {
                    "type": "string"
                  },
                  "description": {
                    "description": "Description as HTML",
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ]
                  },
                  "unit": {
                    "type": "string"
                  },
                  "dataPoints": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "dateOfMeasurement": {
                          "type": "string",
                          "format": "date",
                          "pattern": "^(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))$"
                        },
                        "values": {
                          "type": "object",
                          "properties": {
                            "score": {
                              "type": "number"
                            },
                            "respondents": {
                              "type": "integer",
                              "minimum": 0,
                              "maximum": 9007199254740991
                            }
                          },
                          "required": [
                            "score",
                            "respondents"
                          ],
                          "additionalProperties": false
                        },
                        "dimensions": {
                          "type": "array",
                          "items": {
                            "title": "Dimension",
                            "description": "Value for one dimension",
                            "type": "object",
                            "properties": {
                              "key": {
                                "type": "string"
                              },
                              "value": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "key",
                              "value"
                            ],
                            "additionalProperties": false
                          }
                        }
                      },
                      "required": [
                        "dateOfMeasurement",
                        "values"
                      ],
                      "additionalProperties": false
                    }
                  }
                },
                "required": [
                  "type",
                  "importKey",
                  "title",
                  "description",
                  "unit",
                  "dataPoints"
                ],
                "additionalProperties": false
              },
              {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "const": "CSAT"
                  },
                  "importKey": {
                    "description": "Unique identifier for metric",
                    "type": "string"
                  },
                  "title": {
                    "type": "string"
                  },
                  "description": {
                    "description": "Description as HTML",
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ]
                  },
                  "unit": {
                    "type": "string"
                  },
                  "dataPoints": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "dateOfMeasurement": {
                          "type": "string",
                          "format": "date",
                          "pattern": "^(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))$"
                        },
                        "values": {
                          "type": "object",
                          "properties": {
                            "neutral": {
                              "type": "integer",
                              "minimum": 0,
                              "maximum": 9007199254740991
                            },
                            "satisfied": {
                              "type": "integer",
                              "minimum": 0,
                              "maximum": 9007199254740991
                            },
                            "unsatisfied": {
                              "type": "integer",
                              "minimum": 0,
                              "maximum": 9007199254740991
                            },
                            "verySatisfied": {
                              "type": "integer",
                              "minimum": 0,
                              "maximum": 9007199254740991
                            },
                            "veryUnsatisfied": {
                              "type": "integer",
                              "minimum": 0,
                              "maximum": 9007199254740991
                            }
                          },
                          "required": [
                            "neutral",
                            "satisfied",
                            "unsatisfied",
                            "verySatisfied",
                            "veryUnsatisfied"
                          ],
                          "additionalProperties": false
                        },
                        "dimensions": {
                          "type": "array",
                          "items": {
                            "title": "Dimension",
                            "description": "Value for one dimension",
                            "type": "object",
                            "properties": {
                              "key": {
                                "type": "string"
                              },
                              "value": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "key",
                              "value"
                            ],
                            "additionalProperties": false
                          }
                        }
                      },
                      "required": [
                        "dateOfMeasurement",
                        "values"
                      ],
                      "additionalProperties": false
                    }
                  }
                },
                "required": [
                  "type",
                  "importKey",
                  "title",
                  "description",
                  "unit",
                  "dataPoints"
                ],
                "additionalProperties": false
              },
              {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "const": "NPS"
                  },
                  "importKey": {
                    "description": "Unique identifier for metric",
                    "type": "string"
                  },
                  "title": {
                    "type": "string"
                  },
                  "description": {
                    "description": "Description as HTML",
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ]
                  },
                  "unit": {
                    "type": "string"
                  },
                  "dataPoints": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "dateOfMeasurement": {
                          "type": "string",
                          "format": "date",
                          "pattern": "^(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))$"
                        },
                        "values": {
                          "type": "object",
                          "properties": {
                            "detractors": {
                              "type": "integer",
                              "minimum": 0,
                              "maximum": 9007199254740991
                            },
                            "passives": {
                              "type": "integer",
                              "minimum": 0,
                              "maximum": 9007199254740991
                            },
                            "promoters": {
                              "type": "integer",
                              "minimum": 0,
                              "maximum": 9007199254740991
                            }
                          },
                          "required": [
                            "detractors",
                            "passives",
                            "promoters"
                          ],
                          "additionalProperties": false
                        },
                        "dimensions": {
                          "type": "array",
                          "items": {
                            "title": "Dimension",
                            "description": "Value for one dimension",
                            "type": "object",
                            "properties": {
                              "key": {
                                "type": "string"
                              },
                              "value": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "key",
                              "value"
                            ],
                            "additionalProperties": false
                          }
                        }
                      },
                      "required": [
                        "dateOfMeasurement",
                        "values"
                      ],
                      "additionalProperties": false
                    }
                  }
                },
                "required": [
                  "type",
                  "importKey",
                  "title",
                  "description",
                  "unit",
                  "dataPoints"
                ],
                "additionalProperties": false
              },
              {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "const": "OTHER"
                  },
                  "importKey": {
                    "description": "Unique identifier for metric",
                    "type": "string"
                  },
                  "title": {
                    "type": "string"
                  },
                  "description": {
                    "description": "Description as HTML",
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ]
                  },
                  "unit": {
                    "type": "string"
                  },
                  "dataPoints": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "dateOfMeasurement": {
                          "type": "string",
                          "format": "date",
                          "pattern": "^(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))$"
                        },
                        "values": {
                          "type": "object",
                          "properties": {
                            "value": {
                              "type": "number"
                            }
                          },
                          "required": [
                            "value"
                          ],
                          "additionalProperties": false
                        },
                        "dimensions": {
                          "type": "array",
                          "items": {
                            "title": "Dimension",
                            "description": "Value for one dimension",
                            "type": "object",
                            "properties": {
                              "key": {
                                "type": "string"
                              },
                              "value": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "key",
                              "value"
                            ],
                            "additionalProperties": false
                          }
                        }
                      },
                      "required": [
                        "dateOfMeasurement",
                        "values"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "aggregationMethod": {
                    "type": "string",
                    "enum": [
                      "SUM",
                      "AVERAGE"
                    ]
                  }
                },
                "required": [
                  "type",
                  "importKey",
                  "title",
                  "description",
                  "unit",
                  "dataPoints",
                  "aggregationMethod"
                ],
                "additionalProperties": false
              },
              {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "const": "RATIO"
                  },
                  "importKey": {
                    "description": "Unique identifier for metric",
                    "type": "string"
                  },
                  "title": {
                    "type": "string"
                  },
                  "description": {
                    "description": "Description as HTML",
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ]
                  },
                  "unit": {
                    "type": "string"
                  },
                  "dataPoints": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "dateOfMeasurement": {
                          "type": "string",
                          "format": "date",
                          "pattern": "^(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))$"
                        },
                        "values": {
                          "type": "object",
                          "properties": {
                            "numerator": {
                              "type": "number"
                            },
                            "denominator": {
                              "type": "number"
                            }
                          },
                          "required": [
                            "numerator",
                            "denominator"
                          ],
                          "additionalProperties": false
                        },
                        "dimensions": {
                          "type": "array",
                          "items": {
                            "title": "Dimension",
                            "description": "Value for one dimension",
                            "type": "object",
                            "properties": {
                              "key": {
                                "type": "string"
                              },
                              "value": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "key",
                              "value"
                            ],
                            "additionalProperties": false
                          }
                        }
                      },
                      "required": [
                        "dateOfMeasurement",
                        "values"
                      ],
                      "additionalProperties": false
                    }
                  }
                },
                "required": [
                  "type",
                  "importKey",
                  "title",
                  "description",
                  "unit",
                  "dataPoints"
                ],
                "additionalProperties": false
              }
            ]
          }
        }
      },
      "required": [
        "metrics"
      ],
      "additionalProperties": false
    }
  },
  "required": [
    "schema",
    "data"
  ],
  "additionalProperties": false,
  "id": "MetricsFile"
}